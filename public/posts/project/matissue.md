#### 주요 기능

- 메일인증 을 통한 회원 가입 및 아이디 비밀번호 찾기
- session 방식을 사용한 로그인
- 요리 레시피 CRUD 기능
- 댓글 CURD 기능
- 요리 레시피 검색 및 필터링 기능
- 요리 레시피 스크랩 기능
- 프로필 편집 기능
- 유저 팔로우 기능

##

#### 부가 기능

- 다크모드
- 반응형 웹
- 최근 검색어
- 배너 및 레시피 리스트 캐러셀

##

#### 프로젝트를 통해 배운것들

- SSR 환경에서 CSS-in-JS 인 Styled-Components를 사용하다보니 페이지 로드시에 뒤늦은 스타일적용으로 인해 레이아웃 쉬프트 현상이일어나는 FOUC(Flash of Unstyled Content)이슈가 있었습니다.

  → Styeld-Components 는 SSR 설정을 지원해 주어서, next.config.js의 컴파일러 설정을 통해 서버사이드에서 프리렌더링시, 미리 스타일을 입히어 해결할 수 있었습니다.

- 랜딩페이지에서 처음에는 모든 데이터를 SSR로 렌더링하여 페이지 로딩 시간이 2초가 넘게 걸리는 문제가 있었습니다.

  → `부분적인 SSR을 적용` (화면에 먼저 노출되는 부분은 SSR, 추후에 보여도 되는 부분은 CSR) 하였고, `Dynamic import`를 통한 `코드 스플리팅`으로 최적화하여 `로딩 시간을 4배이상 단축`시켰습니다.

- Next/Image, Sharp 패키지 를 활용하여 `이미지 크기를 최적화하여 평균적으로 20%, 최대 93%가량 감소`시켰고, `이미지 로딩속도를 2배 빠르게 개선`하였습니다. 또한 placeholder 기능을 활용하여 스켈레톤 처리를 통해 데이터 렌더링 과정에서 시각적인 안정성을 높였습니다.
- 라이브러리 도움없이 `자체 설계한 애니메이션`(캐러셀, 다크모드 버튼, 기타 UX/UI적인 요소반응)을 통해 유저 경험을 향상시켰고, `불필요한 리소스나 코드낭비를 줄였습니다.`
- 인증 없이는 접근이 불가능한 페이지 접근시 useEffect로 분기처리를 하면서 페이지 바뀜, 잠깐동안의 페이지 노출 등 부자연스러운 부분이 사용자 경험을 해치는 문제가 있었습니다.

  → `Next.js의 middleware 기능을 활용`하여 서버로의 페이지 request 단계에서 인증정보와 접근하려는 URL을 확인하여 `부자연스러운 부분 없이 부드럽게 로그인 페이지로 Redirect`하여 긍정적인 사용자 경험을 줄수 있도록 하였습니다.

- middleware 기능을 사용할때 처음엔 인증이 필요한 페이지는 로그인페이지로 rewrite기능을 사용하였는데, 배포 단계에서 chunk load error 가 발생하는 이슈가 있었습니다.

  → .next 폴더를 지우는 등 세간에 알려진 해결방법을 동원해봤지만 해결되지 않았고, rewrite 대신 redirect 로 바꾸니까 해결되었습니다. 단순 해결이 끝이아니라, `chunk load error가 발생하는 원인`에 대해서 알 수 있었습니다.

- 회원가입, 로그인 폼을 관리할 때 처음엔 각 인풋에대한 상태값을 만들어주고 일일히 onChange함수를 바인딩 했었는데, 로직이 너무 복잡해지고 useRef를 사용하자니 실시간 발리데이션 여부를 인풋창 아래에 에러메세지로 표현해주기가 어려웠습니다.

  → `React-hook-form 라이브러리를 사용`하여, 불필요한 상태값과 상태업데이트 함수 없이 제출시에 일괄적으로 발리데이션을 체크하고, 이후 렌더링된 에러메세지를 통해 실시간으로 발리데이션 통과여부를 사용자에게 알려줄수 있게 해결하였습니다. 또한 `발리데이션을 상수화 및 임포트하여 코드 가독성과 유지보수성`을 살렸습니다.

- 세션 로그인 방식을 채택하고, 세션 아이디를 쿠키에 저장하는 방식으로 인증 로직을 구현하였는데, 쿠키는 브라우저에 저장되다 보니까, 서버컴포넌트에서 쿠키값을 읽지 못하는 문제가 있었습니다.

  → 공식문서를 읽고 Next 앱라우터에서 제공하는 `next/headers` 라는 기능을 활용하여 req 단계에서 쿠키의 값을 읽고 활용하여 서버 컴포넌트에서도 인증 관련된 HTTP 요청을 하여 페이지를 SSR할 수 있었습니다.

- 회원가입시 생년월일 입력폼이 있는데, `사용자에게 최적화된 경험`을 주기위해, 입력창에 유효한 범위를 입력시 다음창으로 포커싱하여 물 흐르듯이 부드럽게 입력할 수 있는 로직을 구현하였습니다. 발리데이션을 실시간으로 확인하고 포커스를 바꾸는 등 로직이 길고 복잡해져서 `커스텀 훅으로 분리`하여 회원가입 페이지, 아이디, 비밀번호 찾기 페이지에서 `재사용을 통해 생산성을 높였습니다.`
- 입력 폼을 제출시 빠르게 여러번 클릭을하면 중복 제출되는 문제가 있었습니다.

  → `폼 제출로직을 컨트롤하는 loading 상태`를 만들어 폼 제출시에 setIsLoading(true)를 통해 제출 `버튼을 disabled` 하였고, try catch 중 finally 부분에서 setIsLoading(false)로 다시 풀어주어서 중복제출을 방지했습니다.

- Recoil 상태관리 라이브러리를 통해 Styled-Components에 다크모드 상태를 props로 내려주는 방식으로 다크모드를 구현하였는데, 처음에는 일일이 모든 컴포넌트에 적용하려 했지만 이미 만들어진 컴포넌트가 너무 많았습니다.

  → Styled-Component의 ThemeContext를 생성하여, 서비스의 `주요 색상들을 상수화` 하였고 GlobalStyle 설정을 통해 `자주 사용하는 시멘틱 태그들을 한꺼번에 분기처리`하여 비교적 빠르고 쉽게 다크모드를 구현할 수 있었습니다.
